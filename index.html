<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebGPU 3D Chess</title>
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%23142a4d'/%3E%3Cpath d='M10 22l6-12 6 12' stroke='%23a4d5ff' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' fill='none'/%3E%3C/svg%3E"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <canvas id="nebula-canvas" aria-hidden="true"></canvas>
    <div id="loading-overlay" class="loading-overlay is-hidden" role="status" aria-live="polite">
      <div class="loading-panel">
        <canvas id="loading-preview" width="320" height="320" aria-hidden="true"></canvas>
        <p id="loading-progress" class="loading-progress">Preparing the king… <span id="loading-progress-value">0%</span></p>
      </div>
    </div>
    <canvas id="gpu-canvas" width="1280" height="720" class="is-hidden"></canvas>
    <div id="neon-garden" class="neon-garden is-hidden" aria-hidden="true">
      <canvas id="neon-canvas"></canvas>
      <div class="neon-ui">
        <div class="neon-status">
          <span class="neon-title">Neon Garden</span>
          <button id="neon-exit" type="button">Back</button>
          <button id="neon-reset" type="button">Reset Bloom</button>
          <label class="neon-slider">
            Growth
            <input id="neon-growth" type="range" min="0" max="1" step="0.01" value="0.5" />
          </label>
        </div>
        <div class="neon-tips">Drag to paint light. Toggle growth to sculpt the garden.</div>
      </div>
    </div>
    <div class="ui-overlay is-hidden" aria-live="polite">
      <div class="hud">
        <div class="status-group">
          <span id="turn-indicator" class="turn">Loading…</span>
          <span id="check-indicator" class="message"></span>
        </div>
        <div class="control-group">
          <button id="reset-btn" type="button">Reset Game</button>
        </div>
      </div>
      <button
        id="move-log-toggle"
        class="move-log-toggle"
        type="button"
        aria-controls="move-history"
        aria-expanded="false"
      >
        Moves
      </button>
      <div class="move-log" aria-label="Move history">
        <div class="log-header">
          <span>Moves</span>
          <div id="engine-indicator" class="engine-indicator" aria-hidden="true">
            <span class="dot" aria-hidden="true"></span>
            <span>Stockfish thinking…</span>
          </div>
        </div>
        <ol id="move-history"></ol>
      </div>
    </div>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <script type="module" src="src/main.js"></script>
  </body>
</html>
